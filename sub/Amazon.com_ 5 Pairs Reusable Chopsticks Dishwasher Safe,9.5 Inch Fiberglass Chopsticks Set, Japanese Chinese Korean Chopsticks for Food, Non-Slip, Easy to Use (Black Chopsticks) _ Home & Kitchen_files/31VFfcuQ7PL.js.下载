'use strict';mix_d("P13NDIBlendedWidgetCards__p13n-di-bw-desktop-carousel:p13n-di-bw-desktop-carousel__HeYvZksL","exports tslib @c/aui-carousel @c/remote-operations @c/dom @c/scoped-dom @c/metrics @c/browser-operations @c/aui-modal @c/aui-untrusted-ajax".split(" "),function(y,p,F,G,H,I,u,J,K,L){function v(b){return b&&"object"===typeof b&&"default"in b?b:{"default":b}}var M=v(F),N=v(G),w=v(H),z=v(I),D=v(J),O=v(K),P=v(L),x=function(b,a){return b.querySelector("[class*="+a+"]")},Q=function(b,a,c){b=
JSON.parse(b);b.adCreativeMetaData=a.adCreativeMetaData;b.feedbackFormContainerId=c;return encodeURI(JSON.stringify(b))},R=function(b,a,c,e){return p.__awaiter(void 0,void 0,void 0,function(){var g,f,d,h,k,q,m,r;return p.__generator(this,function(l){g="adFeedbackModal_"+b;l=(null===(r=x(a,"ad-feedback-modal-container"))||void 0===r?void 0:r.className)||"";f="."+a.className+" ."+l.replace(" ",".");h=(d=c().adCreativeMetaData.adCreativeDetails)?d.length:0;k=a.dataset.deviceType||"desktop";l=Math.max(560,
125*h+130);var n=h;var t=k;n=e&&"true"===e.toLowerCase()?2>n?605:810:"tablet"==t?2>n?545:775:2>n?430:645;q={a11yOpenMessage:"",width:l,height:n};try{return m=O["default"].create(g,f,q),[2,m]}catch(A){throw u.count("adfeedback:cards:clientDesktop:modalCreation:failure",1),Error("Modal Creation Failed : "+A);}})})},U=function(b,a,c,e,g,f){var d="rtl"===document.getElementsByTagName("html")[0].dir?"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";var h=x(w["default"].cardRoot,d);b.on("beforeShow",
function(){return p.__awaiter(void 0,void 0,void 0,function(){var k;return p.__generator(this,function(q){switch(q.label){case 0:return k=S(b,a,c),[4,b.render(function(m){var r="250px",l=c().adCreativeMetaData.adCreativeDetails;l&&2>l.length&&(r="150px");h.style.marginTop=r;m.innerHTML="";r=m.appendChild;l=document.getElementsByTagName("html")[0].dir;var n=w["default"].createElement("div"),t=w["default"].createElement("div");n.innerHTML=g;"rtl"===l?(n.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 28px; margin-right: 0px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 0px; padding-right: 25px; padding-top: 16px; text-align: right; text-rendering: optimizelegibility; visibility: visible;'),
t.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to left, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: right; visibility: visible; z-index: 10;')):
(n.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 0px; margin-right: 28px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 25px; padding-right: 0px; padding-top: 16px; text-align: left; text-rendering: optimizelegibility; visibility: visible;'),t.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to right, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: left; visibility: visible; z-index: 10;'));
t.appendChild(n);r.call(m,t);r=document.getElementsByTagName("html")[0].dir;l=w["default"].createElement("div");"rtl"===r?l.setAttribute("style","padding-bottom: 16px; padding-right: 50px ; padding-top: 16px; justify-content: center; align-items: center;"):l.setAttribute("style","padding-bottom: 16px; padding-left: 50px ; padding-top: 16px; justify-content: center; align-items: center;");T(h,l,e,k,f);m.appendChild(l)})];case 1:return q.sent(),[2]}})})})},S=function(b,a,c){c=c();var e=c.adCreativeMetaData.adCreativeDetails;
null===e||void 0===e?void 0:e.sort(function(g,f){return g.adCreativeIndex<f.adCreativeIndex?-1:1});return Q(a,c,b.id)},T=function(b,a,c,e,g){a.appendChild(b);"function"==typeof u.uet&&u.uet("bb","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});P["default"].post("/af/multi-creative/feedback-form",{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===c?"en-US":c}},{pl:e,deviceType:"desktop"}).then(function(f){return p.__awaiter(void 0,void 0,
void 0,function(){var d,h,k;return p.__generator(this,function(q){"function"==typeof u.uet&&u.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});u.count("adfeedback:cards:clientDesktop:fetchFormContent:success",1);d=w["default"].createElement("div");d.innerHTML=String(f.responseBody);for(h=0;h<d.children.length;++h)k=d.children[h],"SCRIPT"===k.tagName?B("script",k,a):"LINK"===k.tagName?B("link",k,a):B("div",k,a);a.removeChild(b);return[2]})})}).catch(function(){"function"==typeof u.uet&&
u.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});u.count("adfeedback:cards:clientDesktop:fetchFormContent:failure",1);a.innerHTML=g});"function"==typeof u.uex&&u.uex("ld","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1})},B=function(b,a,c){var e=w["default"].createElement(b);e.innerHTML=a.innerHTML;a.getAttributeNames().forEach(function(g){e.setAttribute(g,a.getAttribute(g)||"")});c.appendChild(e)},E={},W=function(b,a){return p.__awaiter(void 0,void 0,void 0,
function(){var c,e,g,f,d,h,k,q,m;return p.__generator(this,function(r){c=x(b,"ad-feedback-primary-link");e=a().adFeedbackLabelId;g=D["default"].setup();f="open-modal"+e;d=a().adCreativeMetaData.adCreativeDetails;h=b.dataset;k=h.isDsaEnabled;q=h.weblabTreatment;m=String(k);"undefined"===m&&(m=d&&0<d.length?d[0].selectionSignals?"true":"false":"false");"true"===m&&"T1"!==q&&(m="false");g.attach(f,c);g.define(f,"click",function(){return p.__awaiter(void 0,void 0,void 0,function(){var l;return p.__generator(this,
function(n){switch(n.label){case 0:return(l=E[e])?[3,2]:[4,R(e,b,a,m)];case 1:l=n.sent();var t=b.dataset,A=t.formHeaderText,V=t.dsaFormHeaderText;U(l,t.adFeedbackPayload,a,t.currentLocale,"true"===m?V:A,t.formLoadErrorText);E[e]=l;n.label=2;case 2:return l.show(),[2]}})})});return[2]})})},X=function(b,a){var c=D["default"].setup(),e="mouse-enter"+a;a="mouse-leave"+a;var g=x(b,"ad-feedback-primary-link"),f=x(b,"ad-feedback-text-desktop"),d=x(b,"ad-feedback-sprite");c.attach(e,g);c.define(e,"mouseenter",
function(){d.style.backgroundPosition="0px -12px";f.style.color="#111111"});c.attach(a,g);c.define(a,"mouseleave",function(){d.style.backgroundPosition="0px 0px";f.style.color="#555"})},Y=function(b){return p.__awaiter(void 0,void 0,void 0,function(){var a,c,e,g;return p.__generator(this,function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),a=b(),c=z["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+a.adFeedbackLabelId)[0],e=c.dataset.isSponsoredLabelActive,"false"===
(e||"false").toLowerCase()?[2]:[4,X(c,a.adFeedbackLabelId)];case 1:return f.sent(),[4,W(c,b)];case 2:return f.sent(),[3,4];case 3:throw g=f.sent(),u.count("adfeedback:cards:clientDesktop:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for desktop client : "+g);case 4:return[2]}})})},Z=function(b,a,c,e,g,f,d,h){d=void 0===d||void 0===h?void 0:{version:1,context:!0,location:"true"===d,pastActivity:"true"===h?0:1};return{adCreativeDetails:[{asin:b,adCreativeIndex:0,adId:a,campaignId:c,
title:e,advertiserIdNS:g&&f?"axiom."+f+"."+g:void 0,selectionSignals:d}]}},C=function(b,a){return p.__awaiter(void 0,void 0,void 0,function(){var c,e;return p.__generator(this,function(g){c=function(f){if(f=a.item(f)){var d=f.dataset;f=d.adFeedbackLabelId;var h=d.adFeedbackAsin,k=d.adId,q=d.campaignId,m=d.asinTitle,r=d.advertiserId,l=d.marketplaceId,n=d.locationUsed;d=d.interestBased;if(f&&h&&k&&q&&m&&r&&l&&n&&d&&!b.includes(f)){var t={adFeedbackLabelId:f,adCreativeMetaData:Z(h,k,q,m,r,l,n,d)};Y(function(){return t});
b.push(f)}}};for(e=0;e<a.length;e++)c(e);return[2]})})};y._operationNames=["getCarouselFaceouts"];y.card=function(){return p.__awaiter(void 0,void 0,void 0,function(){var b,a,c,e,g,f,d,h,k;return p.__generator(this,function(q){switch(q.label){case 0:return b=N["default"].setup(["getCarouselFaceouts"]),a=z["default"].cardRoot.getElementsByClassName("p13n-bw-desktop-carousel")[0],c=M["default"].getCarousel(a),[4,c.initialized];case 1:q.sent();e=a.dataset||{};g=z["default"].cardRoot.getElementsByClassName("bw-desktop-carousel-cards-hidden-client-data")[0];
f=g.dataset.subject;d=JSON.parse(f);h=[];k=w["default"].cardRoot.getElementsByClassName("bw-desktop-carousel-card-sponsored-label");C(h,k);if(!k)return[2];c.attachRemoteOperation(function(m){return b.getCarouselFaceouts({content:e,clientData:d,ids:m.ids,indexes:m.indexes})});a.addEventListener("click",function(m){C(h,k)});return[2]}})})};y.enableAdFeedbackForNewLabels=C});
